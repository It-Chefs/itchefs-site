<!-- üç≥ Agogy Gold Banner -->
<div class="agogy-bar">
  üç≥ Chef Avian & Skunkah Kitchen ¬∑ <em>Agogy Gold Edition 2025</em>
</div>

<!-- üçØ Load Agogy Styles -->
<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

<!-- ‚öôÔ∏è Agogy Injectors (footer, docs-nav, motion, brand, hero logo) -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  // ===== helpers =====
  var base = '{{ site.baseurl | default: "" }}';

  // ===== footer =====
  var f = document.querySelector('.site-footer');
  if (f) {
    f.innerHTML = '<div class="ag-footer">¬© ' + new Date().getFullYear() +
      ' IT Chefs Studios ‚Äî <strong>Agogy Gold Edition</strong> ¬∑ ' +
      '<a href="https://github.com/It-Chefs/itchefs-site">GitHub</a> ¬∑ ' +
      '<a href="https://github.com/It-Chefs/itchefs-site/blob/main/LICENSE">License</a></div>';
  }

    // ===== docs nav =====
  var header = document.querySelector('.page-header');
  if (header) {
    // base is site.baseurl (e.g. "/itchefs-site")
    // Most GitHub Pages setups with `source: docs` do NOT include "/docs" in the URL,
    // so we treat base as the URL root.
    var docsBase = base || '';

    var links = [
      { href: docsBase + '/',            label: 'Home' },
      { href: docsBase + '/briefs/',     label: 'Briefs' },
      { href: docsBase + '/automation/', label: 'Playbooks' },
      { href: docsBase + '/branding/',   label: 'Branding' },
      { href: docsBase + '/tests/',      label: 'Tests' }
    ];

    var nav = document.createElement('nav');
    nav.className = 'ag-nav';
    nav.setAttribute('aria-label','Primary');
    nav.innerHTML = links.map(function (i) {
      return '<a href="' + i.href + '">' + i.label + '</a>';
    }).join('');
    header.insertAdjacentElement('beforebegin', nav);

    var here = location.pathname;
    Array.from(nav.querySelectorAll('a')).forEach(function (a) {
      try {
        var ap = new URL(a.href, location.origin).pathname;
        if (here === ap || (ap !== docsBase + '/' && here.startsWith(ap))) {
          a.classList.add('active');
        }
      } catch (e) {}
    });
  }

  // ===== brand polish =====
  if (header) {
    header.classList.add('ag-ambient');
    var name = header.querySelector('.project-name');
    var tag  = header.querySelector('.project-tagline');
    var brandHTML = 'IT&nbsp;Chefs<span class="tm">‚Ñ¢</span>';
    if (name) { name.innerHTML = brandHTML; name.classList.add('ag-shimmer'); }
    if (tag)  { tag.classList.add('ag-shimmer'); }
    try { document.title = 'IT Chefs ‚Äî Where Automation Meets Art‚Ñ¢'; } catch(e){}
  }

  // ===== Calm ‚áÑ Showtime (hype) toggle =====
  var bar = document.querySelector('.agogy-bar');
  var toggle = null, toggleLabel = null;

  function applyMode(mode){
    // write data attribute for CSS driven transitions
    document.documentElement.setAttribute('data-motion', mode);
    localStorage.setItem('agogy.motion', mode);

    // toggle pill label/state
    if (toggle) {
      toggle.classList.toggle('on', mode === 'hype');
      toggleLabel.textContent = 'Showtime: ' + (mode === 'hype' ? 'ON' : 'OFF');
    }
  }

  if (bar) {
    toggle = document.createElement('button');
    toggle.className = 'ag-toggle';
    toggle.setAttribute('type','button');
    toggle.setAttribute('aria-label','Toggle Showtime animations');
    toggle.innerHTML = '<span class="dot" aria-hidden="true"></span><span class="label">Showtime</span>';
    toggleLabel = toggle.querySelector('.label');
    bar.style.position = 'fixed';
    bar.appendChild(toggle);
    toggle.addEventListener('click', function(){
      var current = document.documentElement.getAttribute('data-motion') || 'hype';
      applyMode(current === 'hype' ? 'calm' : 'hype');
    });
    bar.classList.add('ag-breathe');
  }

  var prefersReduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  applyMode(prefersReduce ? 'calm' : (localStorage.getItem('agogy.motion') || 'hype'));

  // ===== Hero logo (correct path) =====
  if (header && !header.querySelector('.ag-logo')) {
    var titleEl = header.querySelector('.project-name') || header;

    var img = document.createElement('img');
    img.className = 'ag-logo';
    img.alt = 'IT Chefs Logo';
    img.decoding = 'async';
    img.loading  = 'eager';

    // ‚úÖ correct logo path you confirmed
    img.src = "{{ '/assets/img/itchefs-logo-gold.png' | relative_url }}";

    // gentle halo handled via CSS; we only inject the node here
    titleEl.insertAdjacentElement('afterend', img);
  }
});
</script>
